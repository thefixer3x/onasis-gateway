# Nixpacks configuration for Railway deployment
# Force Node.js runtime, disable Bun detection

providers = ["node"]

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = ["npm ci --omit=dev --legacy-peer-deps || npm install --omit=dev --legacy-peer-deps"]

[phases.build]
# No build phase needed - using pre-compiled JS

[start]
cmd = "node unified_gateway.js"

[variables]
NODE_ENV = "production"
MCP_TOOL_MODE = "lazy"
